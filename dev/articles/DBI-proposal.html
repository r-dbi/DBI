<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Common Interface to Relational Databases from R and S -- A Proposal • DBI</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="A Common Interface to Relational Databases from R and S -- A Proposal">
<meta property="og:description" content="DBI">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DBI</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.1.3.9009</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/DBI.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-dbi/DBI/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>A Common Interface to Relational Databases from
R and S – A Proposal</h1>
                        <h4 data-toc-skip class="author">David
James</h4>
            
            <h4 data-toc-skip class="date">March 16, 2000</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/r-dbi/DBI/blob/HEAD/vignettes/DBI-proposal.Rmd" class="external-link"><code>vignettes/DBI-proposal.Rmd</code></a></small>
      <div class="hidden name"><code>DBI-proposal.Rmd</code></div>

    </div>

    
    
<p>For too long S and similar data analysis environments have lacked
good interfaces to relational database systems (RDBMS). For the last
twenty years or so these RDBMS have evolved into highly optimized
client-server systems for data storage and manipulation, and currently
they serve as repositories for most of the business, industrial, and
research “raw” data that analysts work with. Other analysis packages,
such as SAS, have traditionally provided good data connectivity, but S
and GNU R have relied on intermediate text files as means of importing
data (but see <span class="citation"><em><span>R</span> Data
Import/Export</em> (2001)</span> and <span class="citation"><em>Using
Relational Database Systems with <span>R</span></em> (2000)</span>.)
Although this simple approach works well for relatively modest amounts
of mostly static data, it does not scale up to larger amounts of data
distributed over machines and locations, nor does it scale up to data
that is highly dynamic – situations that are becoming increasingly
common.</p>
<p>We want to propose a common interface between R/S and RDBMS that
would allow users to access data stored on database servers in a uniform
and predictable manner irrespective of the database engine. The
interface defines a small set of classes and methods similar in spirit
to Python’s DB-API, Java’s JDBC, Microsoft’s ODBC, Perl’s DBI, etc., but
it conforms to the “whole-object” philosophy so natural in S and R.</p>
<div class="section level2">
<h2 id="sec:distr">Computing with Distributed Data<a class="anchor" aria-label="anchor" href="#sec:distr"></a>
</h2>
<p>As data analysts, we are increasingly faced with the challenge of
larger data sources distributed over machines and locations; most of
these data sources reside in relational database management systems
(RDBMS). These relational databases represent a mature client-server
distributed technology that we as analysts could be exploiting more that
we’ve done in the past. The relational technology provides a
well-defined standard, the ANSI SQL-92 <span class="citation"><em><span class="nocase">X/Open CAE Specification: SQL and RDA</span></em>
(1994)</span>, both for defining and manipulating data in a highly
optimized fashion from virtually any application.</p>
<p>In contrast, S and Splus have provided somewhat limited tools for
coping with the challenges of larger and distributed data sets (Splus
does provide an <code>import</code> function to import from databases,
but it is quite limited in terms of SQL facilities). The R community has
been more resourceful and has developed a number of good libraries for
connecting to mSQL, MySQL, PostgreSQL, and ODBC; each library, however,
has defined its own interface to each database engine a bit differently.
We think it would be to everybody’s advantage to coordinate the
definition of a common interface, an effort not unlike those taken in
the Python and Perl communities.</p>
<p>The goal of a common, seamless access to distributed data is a modest
one in our evolution towards a fully distributed computing environment.
We recognize the greater goal of distributed computing as the means to
fully integrate diverse systems – not just databases – into a truly
flexible analysis environment. Good connectivity to databases, however,
is of immediate necessity both in practical terms and as a means to help
us transition from monolithic, self-contained systems to those in which
computations, not only the data, can be carried out in parallel over a
wide number of computers and/or systems <span class="citation">Temple
Lang (2000)</span>. Issues of reliability, security, location
transparency, persistence, etc., will be new to most of us and working
with distributed data may provide a more gradual change to ease in the
ultimate goal of full distributed computing.</p>
</div>
<div class="section level2">
<h2 id="sec:rs-dbi">A Common Interface<a class="anchor" aria-label="anchor" href="#sec:rs-dbi"></a>
</h2>
<p>We believe that a common interface to databases can help users easily
access data stored in RDBMS. A common interface would describe, in a
uniform way, how to connect to RDBMS, extract meta-data (such as list of
available databases, tables, etc.) as well as a uniform way to execute
SQL statements and import their output into R and S. The current
emphasis is on querying databases and not so much in a full low-level
interface for database development as in JDBC or ODBC, but unlike these,
we want to approach the interface from the “whole-object” perspective
<span class="citation">J. M. Chambers (1998)</span> so natural to R/S
and Python – for instance, by fetching all fields and records
simultaneously into a single object.</p>
<p>The basic idea is to split the interface into a front-end consisting
of a few classes and generic functions that users invoke and a back-end
set of database-specific classes and methods that implement the actual
communication. (This is a very well-known pattern in software
engineering, and another good verbatim is the device-independent
graphics in R/S where graphics functions produce similar output on a
variety of different devices, such X displays, Postscript, etc.)</p>
<p>The following verbatim shows the front-end:</p>
<pre><code>&gt; mgr &lt;- dbManager("Oracle")
&gt; con &lt;- dbConnect(mgr, user = "user", passwd = "passwd")
&gt; rs &lt;- dbExecStatement(con,
          "select fld1, fld2, fld3 from MY_TABLE")
&gt; tbls &lt;- fetch(rs, n = 100)
&gt; hasCompleted(rs)
[1] T
&gt; close(rs)
&gt; rs &lt;- dbExecStatement(con,
          "select id_name, q25, q50 from liv2")
&gt; res &lt;- fetch(rs)
&gt; getRowCount(rs)
[1] 73
&gt; close(con)</code></pre>
<p>Such scripts should work with other RDBMS (say, MySQL) by replacing
the first line with</p>
<pre><code>&gt; mgr &lt;- dbManager("MySQL")</code></pre>
<div class="section level3">
<h3 id="sec:rs-dbi-classes">Interface Classes<a class="anchor" aria-label="anchor" href="#sec:rs-dbi-classes"></a>
</h3>
<p>The following are the main RS-DBI classes. They need to be extended
by individual database back-ends (MySQL, Oracle, etc.)</p>
<dl>
<dt><code>dbManager</code></dt>
<dd>
<p>Virtual class<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> extended by actual database managers, e.g.,
Oracle, MySQL, Informix.</p>
</dd>
<dt><code>dbConnection</code></dt>
<dd>
<p>Virtual class that captures a connection to a database instance<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>.</p>
</dd>
<dt><code>dbResult</code></dt>
<dd>
<p>Virtual class that describes the result of an SQL statement.</p>
</dd>
<dt><code>dbResultSet</code></dt>
<dd>
<p>Virtual class, extends <code>dbResult</code> to fully describe the
output of those statements that produce output records, i.e.,
<code>SELECT</code> (or <code>SELECT</code>-like) SQL statement.</p>
</dd>
</dl>
<p>All these classes should implement the methods <code>show</code>,
<code>describe</code>, and <code>getInfo</code>:</p>
<dl>
<dt><code>show</code></dt>
<dd>
<p>(<code>print</code> in R) prints a one-line identification of the
object.</p>
</dd>
<dt><code>describe</code></dt>
<dd>
<p>prints a short summary of the meta-data of the specified object (like
<code>summary</code> in R/S).</p>
</dd>
<dt><code>getInfo</code></dt>
<dd>
<p>takes an object of one of the above classes and a string specifying a
meta-data item, and it returns the corresponding information
(<code>NULL</code> if unavailable).</p>
<pre><code>&gt; mgr &lt;- dbManager("MySQL")
&gt; getInfo(mgr, "version")
&gt; con &lt;- dbConnect(mgr, ...)
&gt; getInfo(con, "type")</code></pre>
</dd>
</dl>
<p>The reason we implement the meta-data through <code>getInfo</code> in
this way is to simplify the writing of database back-ends. We don’t want
to overwhelm the developers of drivers (ourselves, most likely) with
hundreds of methods as in the case of JDBC.</p>
<p>In addition, the following methods should also be implemented:</p>
<dl>
<dt><code>getDatabases</code></dt>
<dd>
<p>lists all available databases known to the
<code>dbManager</code>.</p>
</dd>
<dt><code>getTables</code></dt>
<dd>
<p>lists tables in a database.</p>
</dd>
<dt><code>getTableFields</code></dt>
<dd>
<p>lists the fields in a table in a database.</p>
</dd>
<dt><code>getTableIndices</code></dt>
<dd>
<p>lists the indices defined for a table in a database.</p>
</dd>
</dl>
<p>These methods may be implemented using the appropriate
<code>getInfo</code> method above.</p>
<p>In the next few sections we describe in detail each of these classes
and their methods.</p>
<div class="section level4">
<h4 id="sec:dbManager">Class <code>dbManager</code><a class="anchor" aria-label="anchor" href="#sec:dbManager"></a>
</h4>
<p>This class identifies the relational database management system. It
needs to be extended by individual back-ends (Oracle, PostgreSQL, etc.)
The <code>dbManager</code> class defines the following methods:</p>
<dl>
<dt><code>load</code></dt>
<dd>
<p>initializes the driver code. We suggest having the generator,
<code>dbManager(driver)</code>, automatically load the driver.</p>
</dd>
<dt><code>unload</code></dt>
<dd>
<p>releases whatever resources the driver is using.</p>
</dd>
<dt><code>getVersion</code></dt>
<dd>
<p>returns the version of the RS-DBI currently implemented, plus any
other relevant information about the implementation itself and the RDBMS
being used.</p>
</dd>
</dl>
</div>
<div class="section level4">
<h4 id="sec:dbConnection">Class <code>dbConnection</code><a class="anchor" aria-label="anchor" href="#sec:dbConnection"></a>
</h4>
<p>This virtual class captures a connection to a RDBMS, and it provides
access to dynamic SQL, result sets, RDBMS session management
(transactions), etc. Note that the <code>dbManager</code> may or may not
allow multiple simultaneous connections. The methods it defines
include:</p>
<dl>
<dt><code>dbConnect</code></dt>
<dd>
<p>opens a connection to the database <code>dbname</code>. Other likely
arguments include <code>host</code>, <code>user</code>, and
<code>password</code>. It returns an object that extends
<code>dbConnection</code> in a driver-specific manner (e.g., the MySQL
implementation creates a connection of class
<code>MySQLConnection</code> that extends <code>dbConnection</code>).
Note that we could separate the steps of connecting to a RDBMS and
opening a database there (i.e., opening an <em>instance</em>). For
simplicity we do the 2 steps in this method. If the user needs to open
another instance in the same RDBMS, just open a new connection.</p>
</dd>
<dt><code>close</code></dt>
<dd>
<p>closes the connection and discards all pending work.</p>
</dd>
<dt><code>dbExecStatement</code></dt>
<dd>
<p>submits one SQL statement. It returns a <code>dbResult</code> object,
and in the case of a <code>SELECT</code> statement, the object also
inherits from <code>dbResultSet</code>. This <code>dbResultSet</code>
object is needed for fetching the output rows of <code>SELECT</code>
statements. The result of a non-<code>SELECT</code> statement (e.g.,
<code>UPDATE, DELETE, CREATE, ALTER</code>, …) is defined as the number
of rows affected (this seems to be common among RDBMS).</p>
</dd>
<dt><code>commit</code></dt>
<dd>
<p>commits pending transaction (optional).</p>
</dd>
<dt><code>rollback</code></dt>
<dd>
<p>undoes current transaction (optional).</p>
</dd>
<dt><code>callProc</code></dt>
<dd>
<p>invokes a stored procedure in the RDBMS (tentative). Stored
procedures are <em>not</em> part of the ANSI SQL-92 standard and
possibly vary substantially from one RDBMS to another. For instance,
Oracle seems to have a fairly decent implementation of stored
procedures, but MySQL currently does not support them.</p>
</dd>
<dt><code>dbExec</code></dt>
<dd>
<p>submit an SQL “script” (multiple statements). May be implemented by
looping with <code>dbExecStatement</code>.</p>
</dd>
<dt><code>dbNextResultSet</code></dt>
<dd>
<p>When running SQL scripts (multiple statements), it closes the current
result set in the <code>dbConnection</code>, executes the next statement
and returns its result set.</p>
</dd>
</dl>
</div>
<div class="section level4">
<h4 id="sec:dbResult">Class <code>dbResult</code><a class="anchor" aria-label="anchor" href="#sec:dbResult"></a>
</h4>
<p>This virtual class describes the result of an SQL statement (any
statement) and the state of the operation. Non-query statements (e.g.,
<code>CREATE</code>, <code>UPDATE</code>, <code>DELETE</code>) set the
“completed” state to 1, while <code>SELECT</code> statements to 0. Error
conditions set this slot to a negative number. The <code>dbResult</code>
class defines the following methods:</p>
<dl>
<dt><code>getStatement</code></dt>
<dd>
<p>returns the SQL statement associated with the result set.</p>
</dd>
<dt><code>getDBConnection</code></dt>
<dd>
<p>returns the <code>dbConnection</code> associated with the result
set.</p>
</dd>
<dt><code>getRowsAffected</code></dt>
<dd>
<p>returns the number of rows affected by the operation.</p>
</dd>
<dt><code>hasCompleted</code></dt>
<dd>
<p>was the operation completed? <code>SELECT</code>’s, for instance, are
not completed until their output rows are all fetched.</p>
</dd>
<dt><code>getException</code></dt>
<dd>
<p>returns the status of the last SQL statement on a given connection as
a list with two members, status code and status description.</p>
</dd>
</dl>
</div>
<div class="section level4">
<h4 id="sec:dbResultSet">Class <code>dbResultSet</code><a class="anchor" aria-label="anchor" href="#sec:dbResultSet"></a>
</h4>
<p>This virtual class extends <code>dbResult</code>, and it describes
additional information from the result of a <code>SELECT</code>
statement and the state of the operation. The <code>completed</code>
state is set to 0 so long as there are pending rows to fetch. The
<code>dbResultSet</code> class defines the following additional
methods:</p>
<dl>
<dt><code>getRowCount</code></dt>
<dd>
<p>returns the number of rows fetched so far.</p>
</dd>
<dt><code>getNullOk</code></dt>
<dd>
<p>returns a logical vector with as many elements as there are fields in
the result set, each element describing whether the corresponding field
accepts <code>NULL</code> values.</p>
</dd>
<dt><code>getFields</code></dt>
<dd>
<p>describes the <code>SELECT</code>ed fields. The description includes
field names, RDBMS internal data types, internal length, internal
precision and scale, null flag (i.e., column allows
<code>NULL</code>’s), and corresponding S classes (which can be
over-ridden with user-provided classes). The current MySQL and Oracle
implementations define a <code>dbResultSet</code> as a named list with
the following elements:</p>
<dl>
<dt>
<code>connection</code>:</dt>
<dd>
<p>the connection object associated with this result set;</p>
</dd>
<dt>
<code>statement</code>:</dt>
<dd>
<p>a string with the SQL statement being processed;</p>
</dd>
<dt>
<code>description</code>:</dt>
<dd>
<p>a field description <code>data.frame</code> with as many rows as
there are fields in the <code>SELECT</code> output, and columns
specifying the <code>name</code>, <code>type</code>,
<code>length</code>, <code>precision</code>, <code>scale</code>,
<code>Sclass</code> of the corresponding output field.</p>
</dd>
<dt>
<code>rowsAffected</code>:</dt>
<dd>
<p>the number of rows that were affected;</p>
</dd>
<dt>
<code>rowCount</code>:</dt>
<dd>
<p>the number of rows so far fetched;</p>
</dd>
<dt>
<code>completed</code>:</dt>
<dd>
<p>a logical value describing whether the operation has completed or
not.</p>
</dd>
<dt>
<code>nullOk</code>:</dt>
<dd>
<p>a logical vector specifying whether the corresponding column may take
NULL values.</p>
</dd>
</dl>
<p>The methods above are implemented as accessor functions to this list
in the obvious way.</p>
</dd>
<dt><code>setDataMappings</code></dt>
<dd>
<p>defines a conversion between internal RDBMS data types and R/S
classes. We expect the default mappings to be by far the most common
ones, but users that need more control may specify a class generator for
individual fields in the result set. (See Section [sec:mappings] for
details.)</p>
</dd>
<dt><code>close</code></dt>
<dd>
<p>closes the result set and frees resources both in R/S and the
RDBMS.</p>
</dd>
<dt><code>fetch</code></dt>
<dd>
<p>extracts the next <code>max.rec</code> records (-1 means all).</p>
</dd>
</dl>
</div>
</div>
<div class="section level3">
<h3 id="sec:mappings">Data Type Mappings<a class="anchor" aria-label="anchor" href="#sec:mappings"></a>
</h3>
<p>The data types supported by databases are slightly different than the
data types in R and S, but the mapping between them is straightforward:
Any of the many fixed and varying length character types are mapped to
R/S <code>character</code>. Fixed-precision (non-IEEE) numbers are
mapped into either doubles (<code>numeric</code>) or long
(<code>integer</code>). Dates are mapped to character using the
appropriate <code>TO_CHAR</code> function in the RDBMS (which should
take care of any locale information). Some RDBMS support the type
<code>CURRENCY</code> or <code>MONEY</code> which should be mapped to
<code>numeric</code>. Large objects (character, binary, file, etc.) also
need to be mapped. User-defined functions may be specified to do the
actual conversion as follows:</p>
<ol style="list-style-type: decimal">
<li>
<p>run the query (either with <code>dbExec</code> or
<code>dbExecStatement</code>):</p>
<pre><code>&gt; rs &lt;- dbExecStatement(con, "select whatever-You-need")</code></pre>
</li>
<li>
<p>extract the output field definitions</p>
<pre><code>&gt; flds &lt;- getFields(rs)</code></pre>
</li>
<li>
<p>replace the class generator in the, say 3rd field, by the user
own generator:</p>
<pre><code>&gt; flds[3, "Sclass"]            # default mapping
[1] "character"</code></pre>
<p>by</p>
<pre><code>&gt; flds[3, "Sclass"] &lt;- "myOwnGeneratorFunction"</code></pre>
</li>
<li>
<p>set the new data mapping prior to fetching</p>
<pre><code>&gt; setDataMappings(resutlSet, flds)</code></pre>
</li>
<li>
<p>fetch the rows and store in a <code>data.frame</code></p>
<pre><code>&gt; data &lt;- fetch(resultSet)</code></pre>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="sec:open-issues">Open Issues<a class="anchor" aria-label="anchor" href="#sec:open-issues"></a>
</h3>
<p>We may need to provide some additional utilities, for instance to
convert dates, to escape characters such as quotes and slashes in query
strings, to strip excessive blanks from some character fields, etc. We
need to decide whether we provide hooks so these conversions are done at
the C level, or do all the post-processing in R or S.</p>
<p>Another issue is what kind of data object is the output of an SQL
query. Currently the MySQL and Oracle implementations return data as a
<code>data.frame</code>; data frames have the slight inconvenience that
they automatically re-label the fields according to R/S syntax, changing
the actual RDBMS labels of the variables; the issue of non-numeric data
being coerced into factors automatically “at the drop of a hat” (as
someone in s-news wrote) is also annoying.</p>
<p>The execution of SQL scripts is not fully described. The method that
executes scripts could run individual statements without returning until
it encounters a query (<code>SELECT</code>-like) statement. At that
point it could return that one result set. The application is then
responsible for fetching these rows, and then for invoking
<code>dbNextResultSet</code> on the opened <code>dbConnection</code>
object to repeat the <code>dbExec</code>/<code>fetch</code> loop until
it encounters the next <code>dbResultSet</code>. And so on. Another
(potentially very expensive) alternative would be to run all statements
sequentially and return a list of <code>data.frame</code>s, each element
of the list storing the result of each statement.</p>
<p>Binary objects and large objects present some challenges both to R
and S. It is becoming more common to store images, sounds, and other
data types as binary objects in RDBMS, some of which can be in principle
quite large. The SQL-92 ANSI standard allows up to 2 gigabytes for some
of these objects. We need to carefully plan how to deal with binary
objects – perhaps tentatively not in full generality. Large objects
could be fetched by repeatedly invoking a specified R/S function that
takes as argument chunks of a specified number of raw bytes. In the case
of S4 (and Splus5.x) the RS-DBI implementation can write into an opened
connection for which the user has defined a reader (but can we guarantee
that we won’t overflow the connection?). In the case of R it is not
clear what data type binary large objects (BLOB) should be mapped
into.</p>
</div>
<div class="section level3">
<h3 id="sec:limitations">Limitations<a class="anchor" aria-label="anchor" href="#sec:limitations"></a>
</h3>
<p>These are some of the limitations of the current interface
definition:</p>
<ul>
<li><p>we only allow one SQL statement at a time, forcing users to split
SQL scripts into individual statements;</p></li>
<li><p>transaction management is not fully described;</p></li>
<li>
<p>the interface is heavily biased towards queries, as opposed to
general purpose database development. In particular we made no attempt
to define “bind variables”; this is a mechanism by which the contents of
S objects are implicitly moved to the database during SQL execution. For
instance, the following embedded SQL statement</p>
<pre><code>  /* SQL */
  SELECT * from emp_table where emp_id = :sampleEmployee</code></pre>
<p>would take the vector <code>sampleEmployee</code> and iterate over
each of its elements to get the result. Perhaps RS-DBI could at some
point in the future implement this feature.</p>
</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="other-approaches">Other Approaches<a class="anchor" aria-label="anchor" href="#other-approaches"></a>
</h2>
<p>The high-level, front-end description of RS-DBI is the more critical
aspect of the interface. Details on how to actually implement this
interface may change over time. The approach described in this document
based on one back-end driver per RDBMS is reasonable, but not the only
approach – we simply felt that a simpler approach based on
well-understood and self-contained tools (R, S, and C API’s) would be a
better start. Nevertheless we want to briefly mention a few alternatives
that we considered and tentatively decided against, but may quite
possibly re-visit in the near future.</p>
<div class="section level3">
<h3 id="sec:odbc">Open Database Connectivity (ODBC)<a class="anchor" aria-label="anchor" href="#sec:odbc"></a>
</h3>
<p>The ODBC protocol was developed by Microsoft to allow connectivity
among C/C++ applications and RDBMS. As you would expect, originally
implementations of the ODBC were only available under Windows
environments. There are various effort to create a Unix implementation
(see <a href="http://www.unixodbc.org/" class="external-link">the Unix ODBC</a> web-site and
<span class="citation">Harvey (1999)</span>). This approach looks
promising because it allows us to write only one back-end, instead of
one per RDBMS. Since most RDBMS already provide ODBC drivers, this could
greatly simplify development. Unfortunately, the Unix implementation of
ODBC was not mature enough at the time we looked at it, a situation we
expect will change in the next year or so. At that point we will need to
re-evaluate it to make sure that such an ODBC interface does not
penalize the interface in terms of performance, ease of use, portability
among the various Unix versions, etc.</p>
</div>
<div class="section level3">
<h3 id="sec:jdbc">Java Database Connectivity (JDBC)<a class="anchor" aria-label="anchor" href="#sec:jdbc"></a>
</h3>
<p>Another protocol, the Java database connectivity, is very well-done
and supported by just about every RDBMS. The issue with JDBC is that as
of today neither S nor R (which are written in C) interfaces cleanly
with Java. There are several efforts (some in a quite fairly advanced
state) to allow S and R to invoke Java methods. Once this interface is
widely available in Splus5x and R we will need to re-visit this issue
again and study the performance, usability, etc., of JDBC as a common
back-end to the RS-DBI.</p>
</div>
<div class="section level3">
<h3 id="sec:corba">CORBA and a 3-tier Architecture<a class="anchor" aria-label="anchor" href="#sec:corba"></a>
</h3>
<p>Yet another approach is to move the interface to RDBMS out of R and S
altogether into a separate system or server that would serve as a proxy
between R/S and databases. The communication to this middle-layer proxy
could be done through CORBA <span class="citation">Siegel (1996)</span>,
Java’s RMI, or some other similar technology. Such a design could be
very flexible, but the CORBA facilities both in R and S are not widely
available yet, and we do not know whether this will be made available to
Splus5 users from MathSoft. Also, my experience with this technology is
rather limited.</p>
<p>On the other hand, this 3-tier architecture seem to offer the most
flexibility to cope with very large distributed databases, not
necessarily relational.</p>
</div>
</div>
<div class="section level2">
<h2 id="sec:resources">Resources<a class="anchor" aria-label="anchor" href="#sec:resources"></a>
</h2>
<p>The latest documentation and software on the RS-DBI was available at
www.omegahat.net (link dead now:
<code>https://www.omegahat.net/contrib/RS-DBI/index.html</code>). The R
community has developed interfaces to some databases: <a href="https://cran.r-project.org/src/contrib/Archive/RmSQL/" class="external-link">RmSQL</a>
is an interface to the <a href="https://www.Hughes.com.au" class="external-link">mSQL</a>
database written by Torsten Hothorn; <a href="https://sites.cns.utexas.edu/keittlab/software-0" class="external-link">RPgSQL</a> is an
interface to <a href="https://www.postgreSQL.org" class="external-link">PostgreSQL</a> and was
written by Timothy H. Keitt; <a href="https://www.stats.ox.ac.uk/pub/bdr/" class="external-link">RODBC</a> is an interface to
ODBC, and it was written by <a href="mailto:mlapsley@sthelier.sghms.ac.uk">Michael Lapsley</a>. (For
more details on all these see <span class="citation"><em><span>R</span>
Data Import/Export</em> (2001)</span>.)</p>
<p>The are R and S-Plus interfaces to <a href="https://dev.mysql.com/" class="external-link">MySQL</a> that follow the propose RS-DBI
API described here; also, there’s an S-Plus interface SOracle <span class="citation">James (In preparation)</span> to Oracle (we expect to
have an R implementation soon.)</p>
<p>The idea of a common interface to databases has been successfully
implemented in Java’s Database Connectivity (JDBC) (<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/jdbc/" class="external-link">www.javasoft.com</a>),
in C through the Open Database Connectivity (ODBC) (<a href="http://www.unixodbc.org/" class="external-link">www.unixodbc.org</a>), in Python’s
Database Application Programming Interface (<a href="https://www.python.org" class="external-link">www.python.org</a>), and in Perl’s
Database Interface (<a href="https://www.cpan.org" class="external-link">www.cpan.org</a>).</p>
</div>
<div class="section level2">
<h2 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a>
</h2>
<p>The R/S database interface came about from suggestions, comments, and
discussions with <a href="mailto:jmc@research.bell-labs.com">John M.
Chambers</a> and <a href="mailto:duncan@research.bell-labs.com">Duncan
Temple Lang</a> in the context of the Omega Project for Statistical
Computing. <a href="mailto:bates@stat.wisc.edu">Doug Bates</a> and <a href="mailto:saikat@stat.wisc.edu">Saikat DebRoy</a> ported (and greatly
improved) the first MySQL implementation to R.</p>
</div>
<div class="section level2">
<h2 id="the-s-version-4-definitions">The S Version 4 Definitions<a class="anchor" aria-label="anchor" href="#the-s-version-4-definitions"></a>
</h2>
<p>The following code is meant to serve as a detailed description of the
R/S to database interface. We decided to use S4 (instead of R or S
version 3) because its clean syntax help us to describe easily the
classes and methods that form the RS-DBI, and also to convey the
inter-class relationships.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Define all the classes and methods to be used by an</span></span>
<span><span class="co">## implementation of the RS-DataBase Interface.  Mostly,</span></span>
<span><span class="co">## these classes are virtual and each driver should extend</span></span>
<span><span class="co">## them to provide the actual implementation.</span></span>
<span></span>
<span><span class="co">## Class: dbManager</span></span>
<span><span class="co">## This class identifies the DataBase Management System</span></span>
<span><span class="co">## (Oracle, MySQL, Informix, PostgreSQL, etc.)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setClass.html" class="external-link">setClass</a></span><span class="op">(</span><span class="st">"dbManager"</span>, <span class="va">VIRTUAL</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"load"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">dbMgr</span>,<span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"load"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"unload"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">dbMgr</span>,<span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"unload"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"getVersion"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">dbMgr</span>,<span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"getVersion"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span></span>
<span><span class="co">## Class: dbConnections</span></span>
<span><span class="co">## This class captures a connection to a database instance.</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setClass.html" class="external-link">setClass</a></span><span class="op">(</span><span class="st">"dbConnection"</span>, <span class="va">VIRTUAL</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"dbConnection"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">dbMgr</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"dbConnection"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"dbConnect"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">dbMgr</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"dbConnect"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"dbExecStatement"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span>, <span class="va">statement</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"dbExecStatement"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"dbExec"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span>, <span class="va">statement</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"dbExec"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"getResultSet"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span>, <span class="va">..</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"getResultSet"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"commit"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"commit"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"rollback"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"rollback"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"callProc"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"callProc"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setMethod.html" class="external-link">setMethod</a></span><span class="op">(</span><span class="st">"close"</span>,</span>
<span>   signature <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>con<span class="op">=</span><span class="st">"dbConnection"</span>, type<span class="op">=</span><span class="st">"missing"</span><span class="op">)</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span>, <span class="va">type</span><span class="op">)</span> <span class="cn">NULL</span></span>
<span>   <span class="op">)</span></span>
<span></span>
<span><span class="co">## Class: dbResult</span></span>
<span><span class="co">## This is a base class for arbitrary results from the RDBMS</span></span>
<span><span class="co">## (INSERT, UPDATE, DELETE).  SELECTs (and SELECT-like)</span></span>
<span><span class="co">## statements produce "dbResultSet" objects, which extend</span></span>
<span><span class="co">## dbResult.</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setClass.html" class="external-link">setClass</a></span><span class="op">(</span><span class="st">"dbResult"</span>, <span class="va">VIRTUAL</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setMethod.html" class="external-link">setMethod</a></span><span class="op">(</span><span class="st">"close"</span>,</span>
<span>   signature <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>con<span class="op">=</span><span class="st">"dbResult"</span>, type<span class="op">=</span><span class="st">"missing"</span><span class="op">)</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span>, <span class="va">type</span><span class="op">)</span> <span class="cn">NULL</span></span>
<span>   <span class="op">)</span></span>
<span></span>
<span><span class="co">## Class: dbResultSet</span></span>
<span><span class="co">## Note that we define a resultSet as the result of a</span></span>
<span><span class="co">## SELECT  SQL statement.</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setClass.html" class="external-link">setClass</a></span><span class="op">(</span><span class="st">"dbResultSet"</span>, <span class="st">"dbResult"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"fetch"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">resultSet</span>,<span class="va">n</span>,<span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"fetch"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"hasCompleted"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"hasCompleted"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"getException"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"getException"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"getDBconnection"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"getDBconnection"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"setDataMappings"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">resultSet</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"setDataMappings"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"getFields"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">table</span>, <span class="va">dbname</span>,  <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"getFields"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"getStatement"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"getStatement"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"getRowsAffected"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"getRowsAffected"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"getRowCount"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"getRowCount"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"getNullOk"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"getNullOk"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span></span>
<span><span class="co">## Meta-data:</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"getInfo"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"getInfo"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"describe"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">verbose</span><span class="op">=</span><span class="cn">F</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"describe"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"getCurrentDatabase"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"getCurrentDatabase"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"getDatabases"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"getDatabases"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"getTables"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">dbname</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"getTables"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"getTableFields"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">table</span>, <span class="va">dbname</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"getTableFields"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/methods/setGeneric.html" class="external-link">setGeneric</a></span><span class="op">(</span><span class="st">"getTableIndices"</span>,</span>
<span>   def <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">table</span>, <span class="va">dbname</span>, <span class="va">...</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/standardGeneric.html" class="external-link">standardGeneric</a></span><span class="op">(</span><span class="st">"getTableIndices"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span></code></pre></div>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-S4" class="csl-entry">
Chambers, J. M. 1998. <em>Programming with Data: A Guide to the s
Language</em>. New York: Springer.
</div>
<div id="ref-s-corba.98" class="csl-entry">
Chambers, John M., Mark H. Hansen, David A. James, and Duncan Temple
Lang. 1998. <span>“Distributed Computing with Data: A CORBA-Based
Approach.”</span> In <em>Computing Science and Statistics</em>. Inteface
Foundation of North America.
</div>
<div id="ref-odbc.lj" class="csl-entry">
Harvey, Peter. 1999. <span>“<span>Open Database
Connectivity</span>.”</span> <em><span>Linux Journal</span></em> Nov.
(67): 68–72.
</div>
<div id="ref-RS-Oracle" class="csl-entry">
James, David A. In preparation. <span>“An <span>R</span>/<span>S</span>
Interface to the <span>Oracle</span> Database.”</span> www.omegahat.org:
Bell Labs, Lucent Technologies.
</div>
<div id="ref-R.imp-exp" class="csl-entry">
<em><span>R</span> Data Import/Export</em>. 2001. R-Development Core
Team.
</div>
<div id="ref-corba:siegel.96" class="csl-entry">
Siegel, Jon. 1996. <em>CORBA Fundamentals and Programming</em>. New
York: Wiley.
</div>
<div id="ref-duncan2000" class="csl-entry">
Temple Lang, Duncan. 2000. <span>“<span class="nocase">The Omegahat
Environment: New Possibilities for Statistical Computing</span>.”</span>
<em>Journal of Computational and Graphical Statistics</em> to appear.
</div>
<div id="ref-R-dbms" class="csl-entry">
<em>Using Relational Database Systems with <span>R</span></em>. 2000.
R-Developemt Core Team.
</div>
<div id="ref-sql92" class="csl-entry">
<em><span class="nocase">X/Open CAE Specification: SQL and
RDA</span></em>. 1994. Reading, UK: X/Open Company Ltd.
</div>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>A virtual class allows us to group classes that share
some common functionality, e.g., the virtual class
“<code>dbConnection</code>” groups all the connection implementations by
Informix, Ingres, DB/2, Oracle, etc. Although the details will vary from
one RDBMS to another, the defining characteristic of these objects is
what a virtual class captures. R and S version 3 do not explicitly
define virtual classes, but they can easily implement the idea through
inheritance.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>The term “database” is sometimes (confusingly) used both
to denote the RDBMS, such as Oracle, MySQL, and also to denote a
particular database instance under a RDBMS, such as “opto” or “sales”
databases under the same RDBMS.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by R Special Interest Group on Databases (R-SIG-DB), Hadley Wickham, <a href="https://krlmlr.info" class="external-link">Kirill Müller</a>, R Consortium.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.9000.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>

<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Begin/commit/rollback SQL transactions — dbBegin • DBI</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Begin/commit/rollback SQL transactions — dbBegin"><meta name="description" content='A transaction encapsulates several SQL statements in an atomic unit.
It is initiated with dbBegin() and either made persistent with dbCommit()
or undone with dbRollback().
In any case, the DBMS guarantees that either all or none of the statements
have a permanent effect.
This helps ensuring consistency of write operations to multiple tables.

Methods in other packagesThis documentation page describes the generics. Refer to the documentation pages linked below for the documentation for the methods that are implemented in various backend packages.
adbi::dbBegin("AdbiConnection")
adbi::dbCommit("AdbiConnection")
adbi::dbRollback("AdbiConnection")
bigrquery::dbBegin("BigQueryConnection")
bigrquery::dbCommit("BigQueryConnection")
bigrquery::dbRollback("BigQueryConnection")
DatabaseConnector::dbBegin("DatabaseConnectorConnection")
DatabaseConnector::dbCommit("DatabaseConnectorConnection")
DatabaseConnector::dbRollback("DatabaseConnectorConnection")
dittodb::dbBegin("DBIMockConnection")
dittodb::dbCommit("DBIMockConnection")
dittodb::dbRollback("DBIMockConnection")
duckdb::dbBegin("duckdb_connection")
duckdb::dbCommit("duckdb_connection")
duckdb::dbRollback("duckdb_connection")
odbc::dbBegin("OdbcConnection")
odbc::dbCommit("OdbcConnection")
odbc::dbRollback("OdbcConnection")
pool::dbBegin("Pool")
pool::dbCommit("Pool")
pool::dbRollback("Pool")
RJDBC::dbBegin("JDBCConnection")
RJDBC::dbCommit("JDBCConnection")
RJDBC::dbRollback("JDBCConnection")
RMariaDB::dbBegin("MariaDBConnection")
RMariaDB::dbCommit("MariaDBConnection")
RMariaDB::dbRollback("MariaDBConnection")
RMySQL::dbBegin("MySQLConnection")
RMySQL::dbCommit("MySQLConnection")
RMySQL::dbRollback("MySQLConnection")
RPostgres::dbBegin("PqConnection")
RPostgres::dbCommit("PqConnection")
RPostgres::dbRollback("PqConnection")
RPostgreSQL::dbBegin("PostgreSQLConnection")
RPostgreSQL::dbCommit("PostgreSQLConnection")
RPostgreSQL::dbRollback("PostgreSQLConnection")
RSQLite::dbBegin("SQLiteConnection")
RSQLite::dbCommit("SQLiteConnection")
RSQLite::dbRollback("SQLiteConnection")
sparklyr::dbBegin("spark_connection")
sparklyr::dbCommit("spark_connection")
sparklyr::dbRollback("spark_connection")

'><meta property="og:description" content='A transaction encapsulates several SQL statements in an atomic unit.
It is initiated with dbBegin() and either made persistent with dbCommit()
or undone with dbRollback().
In any case, the DBMS guarantees that either all or none of the statements
have a permanent effect.
This helps ensuring consistency of write operations to multiple tables.

Methods in other packagesThis documentation page describes the generics. Refer to the documentation pages linked below for the documentation for the methods that are implemented in various backend packages.
adbi::dbBegin("AdbiConnection")
adbi::dbCommit("AdbiConnection")
adbi::dbRollback("AdbiConnection")
bigrquery::dbBegin("BigQueryConnection")
bigrquery::dbCommit("BigQueryConnection")
bigrquery::dbRollback("BigQueryConnection")
DatabaseConnector::dbBegin("DatabaseConnectorConnection")
DatabaseConnector::dbCommit("DatabaseConnectorConnection")
DatabaseConnector::dbRollback("DatabaseConnectorConnection")
dittodb::dbBegin("DBIMockConnection")
dittodb::dbCommit("DBIMockConnection")
dittodb::dbRollback("DBIMockConnection")
duckdb::dbBegin("duckdb_connection")
duckdb::dbCommit("duckdb_connection")
duckdb::dbRollback("duckdb_connection")
odbc::dbBegin("OdbcConnection")
odbc::dbCommit("OdbcConnection")
odbc::dbRollback("OdbcConnection")
pool::dbBegin("Pool")
pool::dbCommit("Pool")
pool::dbRollback("Pool")
RJDBC::dbBegin("JDBCConnection")
RJDBC::dbCommit("JDBCConnection")
RJDBC::dbRollback("JDBCConnection")
RMariaDB::dbBegin("MariaDBConnection")
RMariaDB::dbCommit("MariaDBConnection")
RMariaDB::dbRollback("MariaDBConnection")
RMySQL::dbBegin("MySQLConnection")
RMySQL::dbCommit("MySQLConnection")
RMySQL::dbRollback("MySQLConnection")
RPostgres::dbBegin("PqConnection")
RPostgres::dbCommit("PqConnection")
RPostgres::dbRollback("PqConnection")
RPostgreSQL::dbBegin("PostgreSQLConnection")
RPostgreSQL::dbCommit("PostgreSQLConnection")
RPostgreSQL::dbRollback("PostgreSQLConnection")
RSQLite::dbBegin("SQLiteConnection")
RSQLite::dbCommit("SQLiteConnection")
RSQLite::dbRollback("SQLiteConnection")
sparklyr::dbBegin("spark_connection")
sparklyr::dbCommit("spark_connection")
sparklyr::dbRollback("spark_connection")

'><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">DBI</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.2.3.9016</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/DBI.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-dbi/DBI/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Begin/commit/rollback SQL transactions</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-dbi/DBI/blob/main/R/dbBegin.R" class="external-link"><code>R/dbBegin.R</code></a>, <a href="https://github.com/r-dbi/DBI/blob/main/R/dbCommit.R" class="external-link"><code>R/dbCommit.R</code></a>, <a href="https://github.com/r-dbi/DBI/blob/main/R/dbRollback.R" class="external-link"><code>R/dbRollback.R</code></a>, and 1 more</small>
      <div class="d-none name"><code>transactions.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A transaction encapsulates several SQL statements in an atomic unit.
It is initiated with <code>dbBegin()</code> and either made persistent with <code>dbCommit()</code>
or undone with <code>dbRollback()</code>.
In any case, the DBMS guarantees that either all or none of the statements
have a permanent effect.
This helps ensuring consistency of write operations to multiple tables.</p>
<p></p><div class="section">
<h3 id="methods-in-other-packages">Methods in other packages<a class="anchor" aria-label="anchor" href="#methods-in-other-packages"></a></h3><p>This documentation page describes the generics. Refer to the documentation pages linked below for the documentation for the methods that are implemented in various backend packages.</p><ul><li><p><code><a href="https://adbi.r-dbi.org/reference/AdbiConnection-class.html" class="external-link">adbi::dbBegin("AdbiConnection")</a></code></p></li>
<li><p><code><a href="https://adbi.r-dbi.org/reference/AdbiConnection-class.html" class="external-link">adbi::dbCommit("AdbiConnection")</a></code></p></li>
<li><p><code><a href="https://adbi.r-dbi.org/reference/AdbiConnection-class.html" class="external-link">adbi::dbRollback("AdbiConnection")</a></code></p></li>
<li><p><code><a href="https://bigrquery.r-dbi.org/reference/DBI.html" class="external-link">bigrquery::dbBegin("BigQueryConnection")</a></code></p></li>
<li><p><code><a href="https://bigrquery.r-dbi.org/reference/DBI.html" class="external-link">bigrquery::dbCommit("BigQueryConnection")</a></code></p></li>
<li><p><code><a href="https://bigrquery.r-dbi.org/reference/DBI.html" class="external-link">bigrquery::dbRollback("BigQueryConnection")</a></code></p></li>
<li><p><code>DatabaseConnector::dbBegin("DatabaseConnectorConnection")</code></p></li>
<li><p><code>DatabaseConnector::dbCommit("DatabaseConnectorConnection")</code></p></li>
<li><p><code>DatabaseConnector::dbRollback("DatabaseConnectorConnection")</code></p></li>
<li><p><code><a href="https://dittodb.jonkeane.com/reference/mock-db-methods.html" class="external-link">dittodb::dbBegin("DBIMockConnection")</a></code></p></li>
<li><p><code><a href="https://dittodb.jonkeane.com/reference/mock-db-methods.html" class="external-link">dittodb::dbCommit("DBIMockConnection")</a></code></p></li>
<li><p><code><a href="https://dittodb.jonkeane.com/reference/mock-db-methods.html" class="external-link">dittodb::dbRollback("DBIMockConnection")</a></code></p></li>
<li><p><code><a href="https://r.duckdb.org/reference/duckdb_connection-class.html" class="external-link">duckdb::dbBegin("duckdb_connection")</a></code></p></li>
<li><p><code><a href="https://r.duckdb.org/reference/duckdb_connection-class.html" class="external-link">duckdb::dbCommit("duckdb_connection")</a></code></p></li>
<li><p><code><a href="https://r.duckdb.org/reference/duckdb_connection-class.html" class="external-link">duckdb::dbRollback("duckdb_connection")</a></code></p></li>
<li><p><code><a href="https://odbc.r-dbi.org/reference/OdbcConnection.html" class="external-link">odbc::dbBegin("OdbcConnection")</a></code></p></li>
<li><p><code><a href="https://odbc.r-dbi.org/reference/OdbcConnection.html" class="external-link">odbc::dbCommit("OdbcConnection")</a></code></p></li>
<li><p><code><a href="https://odbc.r-dbi.org/reference/OdbcConnection.html" class="external-link">odbc::dbRollback("OdbcConnection")</a></code></p></li>
<li><p><code><a href="http://rstudio.github.io/pool/reference/DBI-custom.html" class="external-link">pool::dbBegin("Pool")</a></code></p></li>
<li><p><code><a href="http://rstudio.github.io/pool/reference/DBI-custom.html" class="external-link">pool::dbCommit("Pool")</a></code></p></li>
<li><p><code><a href="http://rstudio.github.io/pool/reference/DBI-custom.html" class="external-link">pool::dbRollback("Pool")</a></code></p></li>
<li><p><code><a href="https://rdrr.io/pkg/RJDBC/man/JDBCConnection-methods.html" class="external-link">RJDBC::dbBegin("JDBCConnection")</a></code></p></li>
<li><p><code><a href="https://rdrr.io/pkg/RJDBC/man/JDBCConnection-methods.html" class="external-link">RJDBC::dbCommit("JDBCConnection")</a></code></p></li>
<li><p><code><a href="https://rdrr.io/pkg/RJDBC/man/JDBCConnection-methods.html" class="external-link">RJDBC::dbRollback("JDBCConnection")</a></code></p></li>
<li><p><code><a href="https://rmariadb.r-dbi.org/reference/transactions.html" class="external-link">RMariaDB::dbBegin("MariaDBConnection")</a></code></p></li>
<li><p><code><a href="https://rmariadb.r-dbi.org/reference/transactions.html" class="external-link">RMariaDB::dbCommit("MariaDBConnection")</a></code></p></li>
<li><p><code><a href="https://rmariadb.r-dbi.org/reference/transactions.html" class="external-link">RMariaDB::dbRollback("MariaDBConnection")</a></code></p></li>
<li><p><code><a href="https://rdrr.io/pkg/RMySQL/man/transactions.html" class="external-link">RMySQL::dbBegin("MySQLConnection")</a></code></p></li>
<li><p><code><a href="https://rdrr.io/pkg/RMySQL/man/transactions.html" class="external-link">RMySQL::dbCommit("MySQLConnection")</a></code></p></li>
<li><p><code><a href="https://rdrr.io/pkg/RMySQL/man/transactions.html" class="external-link">RMySQL::dbRollback("MySQLConnection")</a></code></p></li>
<li><p><code><a href="https://rpostgres.r-dbi.org/reference/postgres-transactions.html" class="external-link">RPostgres::dbBegin("PqConnection")</a></code></p></li>
<li><p><code><a href="https://rpostgres.r-dbi.org/reference/postgres-transactions.html" class="external-link">RPostgres::dbCommit("PqConnection")</a></code></p></li>
<li><p><code><a href="https://rpostgres.r-dbi.org/reference/postgres-transactions.html" class="external-link">RPostgres::dbRollback("PqConnection")</a></code></p></li>
<li><p><code><a href="https://rdrr.io/pkg/RPostgreSQL/man/dbCommit-methods.html" class="external-link">RPostgreSQL::dbBegin("PostgreSQLConnection")</a></code></p></li>
<li><p><code><a href="https://rdrr.io/pkg/RPostgreSQL/man/dbCommit-methods.html" class="external-link">RPostgreSQL::dbCommit("PostgreSQLConnection")</a></code></p></li>
<li><p><code><a href="https://rdrr.io/pkg/RPostgreSQL/man/dbCommit-methods.html" class="external-link">RPostgreSQL::dbRollback("PostgreSQLConnection")</a></code></p></li>
<li><p><code><a href="https://rsqlite.r-dbi.org/reference/sqlite-transaction.html" class="external-link">RSQLite::dbBegin("SQLiteConnection")</a></code></p></li>
<li><p><code><a href="https://rsqlite.r-dbi.org/reference/sqlite-transaction.html" class="external-link">RSQLite::dbCommit("SQLiteConnection")</a></code></p></li>
<li><p><code><a href="https://rsqlite.r-dbi.org/reference/sqlite-transaction.html" class="external-link">RSQLite::dbRollback("SQLiteConnection")</a></code></p></li>
<li><p><code>sparklyr::dbBegin("spark_connection")</code></p></li>
<li><p><code>sparklyr::dbCommit("spark_connection")</code></p></li>
<li><p><code>sparklyr::dbRollback("spark_connection")</code></p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dbBegin</span><span class="op">(</span><span class="va">conn</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dbCommit</span><span class="op">(</span><span class="va">conn</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dbRollback</span><span class="op">(</span><span class="va">conn</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-conn">conn<a class="anchor" aria-label="anchor" href="#arg-conn"></a></dt>
<dd><p>A <a href="DBIConnection-class.html">DBIConnection</a> object, as returned by
<code><a href="dbConnect.html">dbConnect()</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other parameters passed on to methods.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>dbBegin()</code>, <code>dbCommit()</code> and <code>dbRollback()</code> return <code>TRUE</code>, invisibly.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Not all database engines implement transaction management, in which case
these methods should not be implemented for the specific
<a href="DBIConnection-class.html">DBIConnection</a> subclass.</p>
    </div>
    <div class="section level2">
    <h2 id="failure-modes">Failure modes<a class="anchor" aria-label="anchor" href="#failure-modes"></a></h2>



<p>The implementations are expected to raise an error in case of failure,
but this is not tested.
In any way, all generics throw an error with a closed
or invalid connection.
In addition, a call to <code>dbCommit()</code>
or <code>dbRollback()</code>
without a prior call to <code>dbBegin()</code> raises an error.
Nested transactions are not supported by DBI,
an attempt to call <code>dbBegin()</code> twice
yields an error.</p>
    </div>
    <div class="section level2">
    <h2 id="specification">Specification<a class="anchor" aria-label="anchor" href="#specification"></a></h2>



<p>Actual support for transactions may vary between backends.
A transaction is initiated by a call to <code>dbBegin()</code>
and committed by a call to <code>dbCommit()</code>.
Data written in a transaction must persist after the transaction is committed.
For example, a record that is missing when the transaction is started
but is created during the transaction
must exist
both during
and after the transaction,
and also in a new connection.</p>
<p>A transaction
can also be aborted with <code>dbRollback()</code>.
All data written in such a transaction must be removed after the
transaction is rolled back.
For example, a record that is missing when the transaction is started
but is created during the transaction
must not exist anymore after the rollback.</p>
<p>Disconnection from a connection with an open transaction
effectively rolls back the transaction.
All data written in such a transaction must be removed after the
transaction is rolled back.</p>
<p>The behavior is not specified if other arguments are passed to these
functions. In particular, <span class="pkg">RSQLite</span> issues named transactions
with support for nesting
if the <code>name</code> argument is set.</p>
<p>The transaction isolation level is not specified by DBI.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Self-contained transactions: <code><a href="dbWithTransaction.html">dbWithTransaction()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="dbConnect.html">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">":memory:"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="dbWriteTable.html">dbWriteTable</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"cash"</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>amount <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="dbWriteTable.html">dbWriteTable</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"account"</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>amount <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># All operations are carried out as logical unit:</span></span></span>
<span class="r-in"><span><span class="fu">dbBegin</span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">withdrawal</span> <span class="op">&lt;-</span> <span class="fl">300</span></span></span>
<span class="r-in"><span><span class="fu"><a href="dbExecute.html">dbExecute</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"UPDATE cash SET amount = amount + ?"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">withdrawal</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span><span class="fu"><a href="dbExecute.html">dbExecute</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"UPDATE account SET amount = amount - ?"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">withdrawal</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span><span class="fu">dbCommit</span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="dbReadTable.html">dbReadTable</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"cash"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   amount</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    400</span>
<span class="r-in"><span><span class="fu"><a href="dbReadTable.html">dbReadTable</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"account"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   amount</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1700</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Rolling back after detecting negative value on account:</span></span></span>
<span class="r-in"><span><span class="fu">dbBegin</span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">withdrawal</span> <span class="op">&lt;-</span> <span class="fl">5000</span></span></span>
<span class="r-in"><span><span class="fu"><a href="dbExecute.html">dbExecute</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"UPDATE cash SET amount = amount + ?"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">withdrawal</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span><span class="fu"><a href="dbExecute.html">dbExecute</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"UPDATE account SET amount = amount - ?"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">withdrawal</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="dbReadTable.html">dbReadTable</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"account"</span><span class="op">)</span><span class="op">$</span><span class="va">amount</span> <span class="op">&gt;=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">dbCommit</span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">dbRollback</span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="dbReadTable.html">dbReadTable</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"cash"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   amount</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    400</span>
<span class="r-in"><span><span class="fu"><a href="dbReadTable.html">dbReadTable</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"account"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   amount</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1700</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="dbDisconnect.html">dbDisconnect</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by R Special Interest Group on Databases (R-SIG-DB), <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://krlmlr.info" class="external-link">Kirill Müller</a>, R Consortium.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

